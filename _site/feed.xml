<?xml version="1.0" encoding="utf-8"?><feed xmlns="http://www.w3.org/2005/Atom" ><generator uri="https://jekyllrb.com/" version="3.8.5">Jekyll</generator><link href="http://localhost:4000/feed.xml" rel="self" type="application/atom+xml" /><link href="http://localhost:4000/" rel="alternate" type="text/html" /><updated>2018-12-09T18:52:44+09:00</updated><id>http://localhost:4000/feed.xml</id><title type="html">효자손 개발자</title><subtitle>주니어 개발자의 성장 과정</subtitle><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><entry><title type="html">뒤로 걷기</title><link href="http://localhost:4000/notes/1812_2/" rel="alternate" type="text/html" title="뒤로 걷기" /><published>2018-12-07T00:00:00+09:00</published><updated>2018-12-07T00:00:00+09:00</updated><id>http://localhost:4000/notes/1812_2</id><content type="html" xml:base="http://localhost:4000/notes/1812_2/">&lt;p&gt;개발을 하다보면, 아니 우리가 살면서 하나의 생각에 깊이 빠질때가 있다.&lt;/p&gt;

&lt;p&gt;개발을 하던 중 어떤 한 지점에서 막혀버리고, 근본적인 원인을 찾지 못할 때. 계속 같은 방식으로 문제해결을 시도하고 있는 내 자신을 발견할 때가 있다.&lt;/p&gt;

&lt;p&gt;A라는 방법을 시도하고, A가 아니면 B를 시도하고… 퍼즐에서 보면&lt;/p&gt;

&lt;p&gt;이렇게 문제를&lt;/p&gt;

&lt;h2 id=&quot;참고&quot;&gt;[참고]&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;https://www.vobour.com/%EA%B0%9C%EB%B0%9C%EC%9E%90%EC%B2%98%EB%9F%BC-%EC%83%9D%EA%B0%81%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95-%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%EC%9D%98-%EA%B5%90%ED%9B%88-how-to-think-l&lt;/li&gt;
&lt;/ul&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="똥멍청이" /><summary type="html">개발을 하다보면, 아니 우리가 살면서 하나의 생각에 깊이 빠질때가 있다.</summary></entry><entry><title type="html">디버깅</title><link href="http://localhost:4000/notes/1812_1/" rel="alternate" type="text/html" title="디버깅" /><published>2018-12-06T00:00:00+09:00</published><updated>2018-12-06T00:00:00+09:00</updated><id>http://localhost:4000/notes/1812_1</id><content type="html" xml:base="http://localhost:4000/notes/1812_1/">&lt;p&gt;DB 에러로그는 너무나 명료하다.&lt;/p&gt;

&lt;p&gt;너무 명료하고 명확하게 문제를 짚어주기 때문에 놀랄 지경이다.&lt;/p&gt;

&lt;p&gt;아니 사실 모든 로그가 그렇다. 로그 속에 모든 답이 나와있다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;com.mysql.jdbc.exceptions.jdbc4.MySQLIntegrityConstraintViolationException: Duplicate entry APA91bHdNs2EYoFVrmya6w_cK0By9DxNJUzBOCMAxp_ZTkNnE-Uq

at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
	at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:62)
	at sun.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)
	at java.lang.reflect.Constructor.newInstance(Constructor.java:423)
	at com.mysql.jdbc.Util.handleNewInstance(Util.java:425)
	at com.mysql.jdbc.Util.getInstance(Util.java:408)
	at com.mysql.jdbc.SQLError.createSQLException(SQLError.java:935)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3973)
	at com.mysql.jdbc.MysqlIO.checkErrorPacket(MysqlIO.java:3909)
	at com.mysql.jdbc.MysqlIO.sendCommand(MysqlIO.java:2527)
	at com.mysql.jdbc.MysqlIO.sqlQueryDirect(MysqlIO.java:2680)
	at com.mysql.jdbc.ConnectionImpl.execSQL(ConnectionImpl.java:2490)
	at com.mysql.jdbc.PreparedStatement.executeInternal(PreparedStatement.java:1858)
	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2079)
	at com.mysql.jdbc.PreparedStatement.executeUpdateInternal(PreparedStatement.java:2013)
	at com.mysql.jdbc.PreparedStatement.executeLargeUpdate(PreparedStatement.java:5104)
	at com.mysql.jdbc.PreparedStatement.executeUpdate(PreparedStatement.java:1998)
	at com.***.push.dao.***.insertUserToken(***.java:182)
	at com.***.push.dao.***.executeUserToken(***.java:87)
	at com.***.push.dao.***.start(***.java:60)
	at com.***.push.main.***.main(***.java:30)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;심지어 아래 4번쨰 줄 부터 보면, 몇번째 라인 어떤 메서드에서 이런 문제가 발생했는지도 알려준다.&lt;/p&gt;

&lt;p&gt;대단히 친절하고, 명확하다.&lt;/p&gt;

&lt;p&gt;그러면 다시 로그를 보면, ***클래스의 insertUserToken 메서드에서 예외가 발생했다. 해당 클래스의 182번쨰 라인이랜다.&lt;/p&gt;

&lt;p&gt;발생시킨 예외는 ‘MySQLIntegrityConstraintViolationException’ 이다.&lt;/p&gt;

&lt;p&gt;뻔한 에러다. insert하는데 unique key로 설정한 값이 또 들어왔다는 것이다.&lt;/p&gt;

&lt;p&gt;얼마나 간단하고 명료한가.&lt;/p&gt;

&lt;p&gt;그러면 무엇을 봐야하나?&lt;/p&gt;

&lt;p&gt;내가 짜놓은 소스코드를 봐야하나?&lt;/p&gt;

&lt;p&gt;그렇다. 봐야한다.&lt;/p&gt;

&lt;h3 id=&quot;중복된-키값이-들어왔을때-예외처리가-제대로-되어있는지-확인해봐야-한다&quot;&gt;중복된 키값이 들어왔을때 예외처리가 제대로 되어있는지 확인해봐야 한다.&lt;/h3&gt;

&lt;p&gt;그래 되어있다.&lt;/p&gt;

&lt;p&gt;그러면 무얼 확인해야하나?&lt;/p&gt;

&lt;h3 id=&quot;데이터를-전달받을-때-왜-중복된-값이-들어오는지-확인해봐야-한다&quot;&gt;데이터를 전달받을 때 왜 중복된 값이 들어오는지 확인해봐야 한다.&lt;/h3&gt;

&lt;p&gt;지금 이 작업은 서로 다른 서버에 있는 DB를 ETL하는 데몬이다.&lt;/p&gt;

&lt;p&gt;A라는 서버의 데이터를 B라는 서버의 디비에 적재하는 것인데, 그 과정에서 이런 문제를 일으켰다.&lt;/p&gt;

&lt;p&gt;너무나 명확하다. 지금 생각해봐도 어이가없다.&lt;/p&gt;

&lt;p&gt;A서버에 키값으로 설정해놓은 해당 값이 2개 이상있는지 확인해보면 된다.&lt;/p&gt;

&lt;p&gt;그리고나서 그게 왜 2개 이상존재하는지 어디서부터 잘못되었는지는 그 다음 작업이다.&lt;/p&gt;

&lt;p&gt;그런데 그 생각을 못하고있었다.&lt;/p&gt;

&lt;p&gt;A서버에선 당연히 제대로 값을 주겠지 라고 생각한 것이다. 의심조차 하지 않았다.&lt;/p&gt;

&lt;p&gt;그리고 하나 더.&lt;/p&gt;

&lt;p&gt;해당 키 값은 굉장히 긴 해쉬 문자열이다.&lt;/p&gt;

&lt;p&gt;그러면 이것이 내 디비 테이블에 존재하는지 검색할때&lt;/p&gt;

&lt;p&gt;where hash = ‘APA91bHdNs2EYoFVrmya6w_cK0By9DxNJUzBOCMAxp_ZTkNnE-Uq’&lt;/p&gt;

&lt;p&gt;이렇게 검색하면 될까?&lt;/p&gt;

&lt;blockquote&gt;
  &lt;p&gt;예외로그를 100% 맹신하지 마라.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;이 글의 서두에 언급했던 내용에 맞지 않는 얘기지만, 로그를 100% 맹신하면 안된다.&lt;/p&gt;

&lt;p&gt;이 경우 해쉬값이 굉장히 길기 때문에 축약된 중간 어느 지점의 문자열만 나온 것이다.&lt;/p&gt;

&lt;p&gt;그래서 내 테이블에 이 데이터가 존재하지 않는 것으로 확인되었고, 그래서 내 삽질은 더욱 깊어졌다.&lt;/p&gt;

&lt;p&gt;반드시, 이런 중복 오류가 발생했을때는 like 검색을 잊지말자.&lt;/p&gt;

&lt;p&gt;퇴근못하고 테스트 돌려놓고 이 글을 쓰고 있는&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;똥 멍청&lt;/strong&gt;했던 하루다.&lt;/p&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="똥멍청이" /><summary type="html">DB 에러로그는 너무나 명료하다.</summary></entry><entry><title type="html">어떻게 살 것인가</title><link href="http://localhost:4000/review/how_to_live/" rel="alternate" type="text/html" title="어떻게 살 것인가" /><published>2018-11-30T00:00:00+09:00</published><updated>2018-11-30T00:00:00+09:00</updated><id>http://localhost:4000/review/how_to_live</id><content type="html" xml:base="http://localhost:4000/review/how_to_live/">&lt;h3 id=&quot;어떻게-살-것인가&quot;&gt;어떻게 살 것인가&lt;/h3&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/study/review/2018/.jpeg&quot; alt=&quot;어떻게 살것인가&quot; /&gt;&lt;/p&gt;
&lt;figcaption class=&quot;caption&quot;&gt;코딩호러의 이펙티브 프로그래밍(제프 앳우드)&lt;/figcaption&gt;

&lt;p&gt;[내용]
작가 유시민 삶의 흔적이 남아있는 책이다.
지금의 나와 같은 시절에 청년 유시민이 겪었던 고민의 흔적들, 그리고 그 시대를 살아가는 유시민의 모습.
때로는 세상과 맞서며 치열하게. 하지만 냉철하게 세상을 바라보는 모습이 담겨있다.&lt;/p&gt;

&lt;p&gt;저마다 다른 ‘삶’이라는 추상적인 이야기이지만,
작가 유시민은 자신의 이야기를 통해 독자들이 삶을 대하는 자세를 다시 한 번 돌아볼 수 있도록 도와준다.&lt;/p&gt;

&lt;p&gt;[느낀점]
평소 좋아하던 유시민작가의 자서전과 같은 이야기였다.
평소 토론현장이나, 지식/교양프로그램에 나와서 친근하게, 때로는 강하고 논리적으로 자신의 주장을 전달하는 유시민 작가를 좋아했다.
그래서 그가 어떤 고민을 통해서 지금의 유시민이라는 사람이 되었는지 궁금했다.
책 한권으로 한 사람의 인생 전반을 들여다볼 순 없지만, 작가가 고민했던 흔적들을 간접적으로 느끼며 내 삶의 근간에 대해서도 다시한 번 생각해볼 수 있는 좋은 기회가 되었다.&lt;/p&gt;

&lt;p&gt;특히 ‘어떻게 죽을 것인가’를 고민하면 자연스럽게 우리가 ‘어떻게 살지’에 대한 답이 나온다고 한다.
아직 먼 미래, 또는 일어나지 않을 일이라고 생각했던 ‘죽음’이라는 물음에 대해 한번쯤 깊이있게 고민해볼 수 있는 시간이었다.&lt;/p&gt;

&lt;p&gt;가족, 일, 대인관계 등 사회에 신경써야 할 것들이 너무 많아 정작 내 스스로를 돌아보거나 고민해볼 시간이 많이 없었다.
보다 건강하게 사회에서 활약하기 위해선 내 자신에 대한 진지한 고민과 정확한 방향을 세워야 흔들리지 않고 내 삶의 자유를 만끽할 수 있을 것이다.&lt;/p&gt;

&lt;p&gt;[하고 싶은 말]
이 책은 학생, 직장인, 주부 등 직업, 성별, 나이에 관계없이 모두가 읽어볼 만한 책 인 것 같다.&lt;/p&gt;

&lt;p&gt;현대와 같이 치열하고 앞만 보며 달리고 있는 세상에서 잠시 멈춰 서서 
저마다 다른 자신의 위치/상황에서 자신의 삶을 되돌아보고,  무엇을 놓치고 있는지 한번쯤 되짚어 보는 시간도 중요한 것 같다.
또한 과거를 돌아보면 미래가 보이듯이. 각자 현실에 맞는 목표와 미래를 그려보고 청사진을 그려본다면, 훨씬 단단한 삶을 영위할 수 있을 것이라 생각한다.&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;maven &amp;gt; properties &amp;gt; mysql_url 변경&lt;/li&gt;
  &lt;li&gt;web-config &amp;gt; resource-file 제거&lt;/li&gt;
  &lt;li&gt;스케줄 작동 시 &amp;gt; [스케줄 상태] : 대기(0) 적용&lt;/li&gt;
&lt;/ul&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="어떻게 살 것인가" /><summary type="html">어떻게 살 것인가</summary></entry><entry><title type="html">[GCP] zsh in iTerm</title><link href="http://localhost:4000/gcp/gcp_in_zsh/" rel="alternate" type="text/html" title="[GCP] zsh in iTerm" /><published>2018-11-30T00:00:00+09:00</published><updated>2018-11-30T00:00:00+09:00</updated><id>http://localhost:4000/gcp/gcp_in_zsh</id><content type="html" xml:base="http://localhost:4000/gcp/gcp_in_zsh/">&lt;p&gt;iTerms2를 이용 중에 zsh를 설치했다.&lt;/p&gt;

&lt;p&gt;지루했던 쉘의 인터페이스를 입맛에 맞춰 바꾸는 재미를 느끼며 혼자 좋아하고 있었다.&lt;/p&gt;

&lt;p&gt;그리고 잠시 후 쉘을 통해 gcloud에 접속했다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  gcloud compute --project ...
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;그런데 결과는…&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;	gcloud not found
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;어제까지만해도 문제없이 접속을 했는데 갑자기 못찾는다니, 황당했다.&lt;/p&gt;

&lt;p&gt;확인해보니 zsh을 설치하면서 기존에 환경을 잡아놓았던 것이 모두 틀어진 모양이다.&lt;/p&gt;

&lt;p&gt;다시 gcloud sdk를 설치해야한다.&lt;/p&gt;

&lt;h2 id=&quot;gcloud-sdk-설치&quot;&gt;gcloud sdk 설치&lt;/h2&gt;
&lt;blockquote&gt;
  &lt;table&gt;
    &lt;tbody&gt;
      &lt;tr&gt;
        &lt;td&gt;curl https://sdk.cloud.google.com&lt;/td&gt;
        &lt;td&gt;bash&lt;/td&gt;
      &lt;/tr&gt;
    &lt;/tbody&gt;
  &lt;/table&gt;
&lt;/blockquote&gt;

&lt;p&gt;내 경우 완료 후 /Users/[user] 경로에 들어와있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_gcp_sdk.png&quot; alt=&quot;gcp_sdk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;설치가 정상적으로 진행됐으면, zsh 내에 옵션을 추가해준다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  vi .zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;내 경우 가장 하단에 아래의 옵션을 추가해주면된다.&lt;/p&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;# The next line updates PATH for the Google Cloud SDK.
source '/Users/betterfly/google-cloud-sdk/path.bash.inc'

# The next line enables bash completion for gcloud.
source '/Users/betterfly/google-cloud-sdk/completion.bash.inc'
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;현재 설정을 한 후 bash에서 ‘gcloud’ 를 실행하면 정상적으로 실행된다.&lt;/p&gt;

&lt;h3 id=&quot;위와-같이-설정을-했지만-여전히-진행이-안되는-경우&quot;&gt;위와 같이 설정을 했지만 여전히 진행이 안되는 경우.&lt;/h3&gt;

&lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  vi .zshrc
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;다시 zsh config 내용을 열어보면 중간 아래쪽에&lt;/p&gt;

&lt;p&gt;&lt;code&gt;source $ZSH/oh-my-zsh.sh &lt;/code&gt;&lt;/p&gt;

&lt;p&gt;해당 소스가 보일 것이다.&lt;/p&gt;

&lt;p&gt;이 소스 앞에다가 위에 입력한 내용을 다시 입력해주자.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_zsh_config.png&quot; alt=&quot;gcp_sdk&quot; /&gt;&lt;/p&gt;

&lt;p&gt;설정 후 gcloud가 정상적으로 실행된다.&lt;/p&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="GCP" /><category term="zsh" /><category term="iTerm" /><summary type="html">iTerms2를 이용 중에 zsh를 설치했다.</summary></entry><entry><title type="html">[Git] Add가 되지 않는 이슈</title><link href="http://localhost:4000/git/git_cached/" rel="alternate" type="text/html" title="[Git] Add가 되지 않는 이슈" /><published>2018-11-29T00:00:00+09:00</published><updated>2018-11-29T00:00:00+09:00</updated><id>http://localhost:4000/git/git_cached</id><content type="html" xml:base="http://localhost:4000/git/git_cached/">&lt;p&gt;최근 프로젝트 모듈을 분리하고, 디렉토리 구조를 바꾸면서 깃이 꼬여버렸다.&lt;/p&gt;

&lt;p&gt;분리한 파일들이 깃에 add자체가 되지 않고, 로그에서도 특별한 상황을 확인하기 어려웠다.&lt;/p&gt;

&lt;p&gt;파일을 옮겨서 다시 root 경로를 잡은 후 작업을 했지만 결과는 마찬가지였다.&lt;/p&gt;

&lt;p&gt;add가 정상적으로 진행되지 않을 때, 확인해볼 것들이 있다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  // 로컬 Branch 간 비교
  git diff &amp;lt;branch명&amp;gt; &amp;lt;다른 branch명&amp;gt; 

  // 로컬과 리모트Branch 간 비교
  git diff &amp;lt;branch명&amp;gt; origin/&amp;lt;branch명&amp;gt; 

  // Commit 간 비교
  git diff &amp;lt;commit &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &amp;lt;commit &lt;span class=&quot;nb&quot;&gt;hash&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; 

  // 마지막 커밋과 현재 수정사항 확인
  git diff HEAD

  // 현재 unstaged 된 수정사항 확인
  git diff
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;&lt;code&gt;git diff&lt;/code&gt;를 통해 변경된 결과를 확인할 수 있다.&lt;/p&gt;

&lt;p&gt;하지만 내 경우 새로 구성한 디렉토리 및 파일들이 정상적으로 git에 관리되지 않고 있었다.&lt;/p&gt;

&lt;p&gt;정확히 어디서부터 꼬였는지 파악은 어려웠지만, 결과적으로 깃 캐시를 날려서 add 후 push까지 정상적으로 진행할 수 있었다.&lt;/p&gt;

&lt;h3 id=&quot;cached-제거&quot;&gt;cached 제거&lt;/h3&gt;

&lt;p&gt;우선 cached 된 파일을 날려주자.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  git &lt;span class=&quot;nb&quot;&gt;rm&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-r&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--cached&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;.&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;git rm =&amp;gt; 원격 저장소와 로컬 저장소에 있는 파일을 삭제한다. &lt;br /&gt;
git rm –cached =&amp;gt; 원격 저장소에 있는 파일을 삭제한다. 로컬 저장소에 있는 파일은 삭제하지 않는다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;아마도 리모트 저장소에 파일들이 잘못 적재되어 있던 모양이다.&lt;/p&gt;

&lt;p&gt;위와 같이 cache를 날려주니, 정상적으로 add가 진행되었다!&lt;/p&gt;

&lt;hr /&gt;

&lt;p&gt;이 밖에도 리모트 저장소가 아닌 로컬에서 unstaged된 파일을 깔꼼하게 정리하고 싶다면,
다음의 명령어를 날려주면된다.&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  git clean &lt;span class=&quot;nt&quot;&gt;-d&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-x&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-f&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;
&lt;ul&gt;
  &lt;li&gt;-d : 디렉토리 포함&lt;/li&gt;
  &lt;li&gt;-x : igrnoed 파일 포함&lt;/li&gt;
  &lt;li&gt;-f : force&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;이제 로컬 git 환경이 어느정도 정리된 것 같다.&lt;/p&gt;

&lt;p&gt;캐쉬를 날린 후 git add 해주어 최종적으로 push를 해주면 정상적으로 등록시킬 수 있다.&lt;/p&gt;

&lt;p&gt;다음은 add와 commit에 대한 활용을 다루어 보아야겠다.&lt;/p&gt;

&lt;h2 id=&quot;참고&quot;&gt;참고&lt;/h2&gt;
&lt;ul&gt;
  &lt;li&gt;https://gracefullight.github.io/2016/12/28/git-add-%EC%95%88-%EB%90%98%EB%8A%94-%EA%B2%BD%EC%9A%B0-%ED%99%95%EC%9D%B8%ED%95%B4%EC%95%BC%EB%90%A0-%EA%B2%83/&lt;/li&gt;
  &lt;li&gt;https://brunch.co.kr/@hopeless/9&lt;/li&gt;
  &lt;li&gt;http://mygumi.tistory.com/103&lt;/li&gt;
&lt;/ul&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="Git" /><summary type="html">최근 프로젝트 모듈을 분리하고, 디렉토리 구조를 바꾸면서 깃이 꼬여버렸다.</summary></entry><entry><title type="html">SAX Parser Exception</title><link href="http://localhost:4000/java/xml_SAXParser_exception/" rel="alternate" type="text/html" title="SAX Parser Exception" /><published>2018-11-27T00:00:00+09:00</published><updated>2018-11-27T00:00:00+09:00</updated><id>http://localhost:4000/java/xml_SAXParser_exception</id><content type="html" xml:base="http://localhost:4000/java/xml_SAXParser_exception/">&lt;p&gt;driver : com.mysql.jdbc.GoogleDriver&lt;/p&gt;

&lt;p&gt;Cannot create JDBC driver of class ‘com.mysql.jdbc.GoogleDriver’ for connect URL ‘jdbc:mysql://google/db_wmp_push_dev?useSSL=false&amp;amp;cloudSqlInstance=push-209809:asia-northeast1:push-wmp-dev&amp;amp;socketFactory=com.google.cloud.sql.mysql.SocketFactory&amp;amp;user=svc_push&amp;amp;password=svc_push123!&amp;amp;autoReconnect=true&amp;amp;characterEncoding=UTF-8’&lt;/p&gt;

&lt;p&gt;java.sql.SQLException: No suitable driver&lt;/p&gt;

&lt;p&gt;이런 문제&lt;/p&gt;

&lt;p&gt;driver : com.mysql.jdbc.Driver&lt;/p&gt;

&lt;h3 id=&quot;cause-javasqlsqlexception-cannot-create-poolableconnectionfactory-communications-link-failure&quot;&gt;Cause: java.sql.SQLException: Cannot create PoolableConnectionFactory (Communications link failure&lt;/h3&gt;
&lt;p&gt;The last packet sent successfully to the server was 0 milliseconds ago. The driver has not received any packets from the server.)&lt;/p&gt;

&lt;p&gt;Caused by: java.net.UnknownHostException: google&lt;/p&gt;

&lt;p&gt;[SAXParser]&lt;/p&gt;

&lt;p&gt;Simple API for XML&lt;/p&gt;

&lt;p&gt;이름만봐도 XML을 위한거다.&lt;/p&gt;

&lt;p&gt;그렇다 XML과 같은 Mark-up Language에서는 특수문자를 파싱하기 위해선 인식하기 위해선 다른 방법으로 치환하여 표현한다.&lt;/p&gt;

&lt;h2 id=&quot;특히-많이-사용하는-방법은-아래와-같다&quot;&gt;특히 많이 사용하는 방법은 아래와 같다.&lt;/h2&gt;
&lt;p&gt;특수문자   |  바꿔주어야할 문자 
—————————-
“        |    &quot;
—————————-
&amp;amp;        |    &amp;amp;amp
—————————-
‘        |    &amp;amp;apos
—————————-
&amp;lt;        |    &amp;lt;
—————————-&lt;/p&gt;
&lt;blockquote&gt;
  &lt;div class=&quot;highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;   |    &amp;amp;gt; ----------------------------
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;  &lt;/div&gt;
&lt;/blockquote&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="XML" /><category term="JDBC" /><summary type="html">driver : com.mysql.jdbc.GoogleDriver</summary></entry><entry><title type="html">Servlet환경에서 DBCP2 사용하기</title><link href="http://localhost:4000/gcp/mysql_configuration/" rel="alternate" type="text/html" title="Servlet환경에서 DBCP2 사용하기" /><published>2018-11-23T00:00:00+09:00</published><updated>2018-11-23T00:00:00+09:00</updated><id>http://localhost:4000/gcp/mysql_configuration</id><content type="html" xml:base="http://localhost:4000/gcp/mysql_configuration/">&lt;h3 id=&quot;레거시-환경에-dbcp2-적용하기-not-used-spring-framework&quot;&gt;레거시 환경에 DBCP2 적용하기 (not used Spring Framework)&lt;/h3&gt;

&lt;blockquote&gt;
  &lt;p&gt;‘레거시 환경’ 이라는 표현은 Spring Framework를 사용하지 않고 진행하는 기본 웹 Servlet환경을 의미한다. (doGet / doPost 등을 이용한 API 구성)&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;레거시환경에서 myBatis를 구현하는 것은 그럭저럭 구현되었다.&lt;/p&gt;

&lt;p&gt;사실 개선할점이 많이 보였지만, 말그대로 그럭저럭하게 구현된 것이다.&lt;/p&gt;

&lt;p&gt;그런데 소스는 리팩토링하며 수정하면되지만, 기능적으로 문제가 있으면 안될 것이다.&lt;/p&gt;

&lt;p&gt;특히나 DB와 관련해선 서비스에 직접적으로 영향을 주는 아주 치명적인 문제를 일으킬 수 있다.&lt;/p&gt;

&lt;p&gt;특히 그 중 Connection Pool을 관려하는 환경 구성에 대한 의구심이 끊임없이 들었다.&lt;/p&gt;

&lt;p&gt;불안했다.&lt;/p&gt;

&lt;p&gt;Connection Pool 인스턴스가 중구난방으로 만들어지는건 아닌지, Pool은 제대로 관리되고 있는지 SqlSession은 낭비되고 있지 않은지…&lt;/p&gt;

&lt;p&gt;인터넷에서 제공하는 많은 자료들을 참고해서 필요한 설정은 해두었지만 ‘이게 맞나..?’ 라는 의심이 끊이질 않았다.&lt;/p&gt;

&lt;p&gt;그러던 중 내 고민을 해결해 줄 Connection Pool을 관리해주는 Common DBCP2 라는 라이브러리를 찾게되었다.&lt;/p&gt;

&lt;p&gt;마이바티스 사용시 거의 기본적으로 사용되는 라이브러리로 거의 필수로 사용되는 라이브러리이다.&lt;/p&gt;

&lt;p&gt;이걸 써야겠다.&lt;/p&gt;

&lt;p&gt;그런데 문제가 있다.&lt;/p&gt;

&lt;p&gt;스프링에서는 &lt;code&gt;SqlSessionFactoryBean&lt;/code&gt; 이라는 녀석이 있다.&lt;/p&gt;

&lt;p&gt;이 Bean에다가 DB관련 설정을 모두 주입시켜주면, 아주 맘편하게 DB환경을 구축할 수 있다.
DataSource뿐만 아니라, Configuration, Mapper등 DB관련 객체들을 관리해주는 Bean이다.&lt;/p&gt;

&lt;p&gt;문제는 DBCP를 이용하기 위해선 myBatis DataSource를 변경해줘야한다.&lt;/p&gt;

&lt;p&gt;DataSource환경이 DBCP로 되어야 한다는 것이다.&lt;/p&gt;

&lt;p&gt;우리가 일반적으로 사용하는 myBatis-config.xml 정도라고 네이밍하는 myBatis 환경 구성의 모습이다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;cp&quot;&gt;&amp;lt;!DOCTYPE configuration
        PUBLIC &quot;-//mybatis.org//DTD Config 3.0//EN&quot;
        &quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;configuration&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;settings&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;logImpl&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;LOG4J&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cacheEnabled&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lazyLoadingEnabled&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;multipleResultSetsEnabled&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;useColumnLabel&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;useGeneratedKeys&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;false&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;autoMappingBehavior&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;PARTIAL&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;autoMappingUnknownColumnBehavior&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;WARNING&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;defaultExecutorType&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SIMPLE&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;localCacheScope&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SESSION&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;jdbcTypeForNull&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;OTHER&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;setting&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;lazyLoadTriggerMethods&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;equals,clone,hashCode,toString&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/settings&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;environments&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;default=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;development&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;environment&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;id=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;development&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;transactionManager&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;JDBC&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;dataSource&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;type=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;POOLED&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;driver&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${driver}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;url&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${mysql_url}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;username&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${user}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;password&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${password}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;poolMaximumActiveConnections&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;30&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;poolMaximumIdleConnections&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;30&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;poolTimeToWait&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;20000&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;poolPingEnabled&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
                &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;poolPingQuery&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;select 1&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
            &lt;span class=&quot;nt&quot;&gt;&amp;lt;/dataSource&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;/environment&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/environments&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;mappers&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;mapper&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;resource=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mybatis/mappers/com/sample-mapper.xml&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/mappers&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/configuration&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 환경에서 &lt;code&gt;&lt;environment&gt;&lt;code&gt;의 DBCP를 적용하기 위해선 DataSource만 변경해주면된다.&lt;/code&gt;&lt;/environment&gt;&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;역시 문제는 위 상황에서 dataSource에 DBCP를 넣는다고 인식되지 않는다.&lt;/p&gt;

&lt;p&gt;우선 메이븐을 통해 dbcp2를 가져오자.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;dependency&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;groupId&amp;gt;&lt;/span&gt;org.apache.commons&lt;span class=&quot;nt&quot;&gt;&amp;lt;/groupId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;artifactId&amp;gt;&lt;/span&gt;commons-dbcp2&lt;span class=&quot;nt&quot;&gt;&amp;lt;/artifactId&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;2.5.0&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/dependency&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;깔끔하게 xml을 통해서 구현하고 싶은데, 방법을 모르겠다.&lt;/p&gt;

&lt;p&gt;그래서 자바에서 구현했다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;INITIALIZE_POOL_SIZE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MAX_CONNECTION_POOL_SIZE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;int&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MAX_IDLE_POOL_SIZE&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;10&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;final&lt;/span&gt; &lt;span class=&quot;kt&quot;&gt;long&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MAX_CONNECTION_WAIT_MS&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;mi&quot;&gt;30000L&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;

    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BasicDataSource&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dbcpDataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;()&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;BasicDataSource&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;BasicDataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setDriverClassName&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;com.mysql.jdbc.Driver&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getProperties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;service&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;).&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;equals&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;local&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getProperties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;baseUrl&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setUsername&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getProperties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;userName&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setPassword&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getProperties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;userPassword&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;));&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;else&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;getJdbcConnectUrl&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setInitialSize&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;INITIALIZE_POOL_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setMaxTotal&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX_CONNECTION_POOL_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setMaxIdle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX_IDLE_POOL_SIZE&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setMaxWaitMillis&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;MAX_CONNECTION_WAIT_MS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setTestWhileIdle&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;kc&quot;&gt;true&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setValidationQuery&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;SELECT 1&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dbcp&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;blockquote&gt;
  &lt;p&gt;source에서 사용하는 getProperties() 함수는 메이븐 프로파일별로 설정된 각각의 프로파일들을 가져오기 위한 함수이다.&lt;/p&gt;
&lt;/blockquote&gt;

&lt;p&gt;사실 이렇게하고 JDBC접속을 최종적으로 도와주는 SqlSessionFactory 클래스만 다루면 되는데, 문제는 myBatis-config.xml 에 있는 mapper들을 가져와야한다.&lt;/p&gt;

&lt;p&gt;(사실 mapper로 쿼리 쓰자고 myBatis쓰는건데 mapper를 못가져오면 도루묵이다.)&lt;/p&gt;

&lt;p&gt;중요한 SqlSessionFactory부분인데,&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;    &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlSessionFactory&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyBatisConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dbcpDataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;TransactionFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trxFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;JdbcTransactionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;development&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trxFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;Configuration&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Configuration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

            &lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlSessionFactoryBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getConfiguration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;벌써 뭔가 허전하다.&lt;/p&gt;

&lt;p&gt;sqlSessionFactory에 ‘config’ 를 넣어줬는데 Configuration에 실제로 유효한 값은 DataSource 밖에 없다.
나머지 TransactionFactory, Environment 등의 값은 어디에도 없다.&lt;/p&gt;

&lt;p&gt;난 DataSource만 DBCP를 적용하고 나머지는 myBatis-config.xml 에 설정한 값을 사용하고 싶다.&lt;/p&gt;

&lt;p&gt;그렇게 디버깅을 하며 삽질하던 중 방법을 찾을 수 있었다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;SqlSessionFactoryBuilder&lt;/code&gt; 결국 이 클래스에 configuration을 전달해줘야 한다는 건데, 얘가 어떻게 세팅되어야 하는지 클래스 속을 들여다 보았다.&lt;/p&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;      &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlSessionFactory&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;String&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Properties&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
        &lt;span class=&quot;n&quot;&gt;SqlSessionFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
        &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;XMLConfigBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XMLConfigBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;environment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;properties&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;var5&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;this&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;Exception&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var14&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;k&quot;&gt;throw&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;ExceptionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;wrapException&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;Error building SqlSession.&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var14&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;finally&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
            &lt;span class=&quot;n&quot;&gt;ErrorContext&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;instance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;reset&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;

            &lt;span class=&quot;k&quot;&gt;try&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;n&quot;&gt;inputStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;close&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;catch&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;IOException&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var13&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;{&lt;/span&gt;
                &lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
            &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;

        &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;var5&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
    &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;실제로 SqlSessionFactoryBuilder 클래스의 build 메서드의 로직이다.&lt;/p&gt;

&lt;p&gt;생각보다 단순했다. xml파일 자체를 InputStream으로 읽어들여 XML Parsing을 하는 것이다.&lt;/p&gt;

&lt;p&gt;똑같이 해주면된다.&lt;/p&gt;

&lt;p&gt;그래서 했다.&lt;/p&gt;

&lt;h3 id=&quot;configuration&quot;&gt;Configuration&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;private&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Configuration&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;dbcpConfiguration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;DataSource&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyBatisConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;dbcpDataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;TransactionFactory&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;trxFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;JdbcTransactionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;env&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;Environment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;dbcp&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;trxFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;,&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;dataSource&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;n&quot;&gt;InputStream&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;inputStream&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;MyBatisConfig&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;class&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getClassLoader&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getResourceAsStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;mybatis/mybatis-config.xml&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;XMLConfigBuilder&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;XMLConfigBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;inputStream&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;Configuration&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;parser&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;parse&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
    &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;setEnvironment&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;env&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;);&lt;/span&gt;

    &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;config&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h3 id=&quot;최종-sqlsessionfactory-인스턴스-생성-모습&quot;&gt;최종 SqlSessionFactory 인스턴스 생성 모습&lt;/h3&gt;

&lt;div class=&quot;language-java highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;  &lt;span class=&quot;kd&quot;&gt;public&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;static&lt;/span&gt; &lt;span class=&quot;kd&quot;&gt;synchronized&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlSessionFactory&lt;/span&gt; &lt;span class=&quot;nf&quot;&gt;getInstance&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(){&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;if&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;==&lt;/span&gt; &lt;span class=&quot;kc&quot;&gt;null&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;){&lt;/span&gt;
          &lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt; &lt;span class=&quot;o&quot;&gt;=&lt;/span&gt; &lt;span class=&quot;k&quot;&gt;new&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;SqlSessionFactoryBuilder&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;().&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;build&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;(&lt;/span&gt;&lt;span class=&quot;n&quot;&gt;dbcpConfiguration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;());&lt;/span&gt;
      &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
      &lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;.&lt;/span&gt;&lt;span class=&quot;na&quot;&gt;getConfiguration&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;();&lt;/span&gt;
      &lt;span class=&quot;k&quot;&gt;return&lt;/span&gt; &lt;span class=&quot;n&quot;&gt;sqlSessionFactory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;;&lt;/span&gt;
  &lt;span class=&quot;o&quot;&gt;}&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;정리하자면, 내가 필요했던건 myBatis에서 기본으로 사용하는 DataSource접근이 아닌, 내가 원하는 DataSource로 세팅하여 접근하는 것이었다.
mybatis의 configuration xml내에서 직접 접근할 수 있는 방법이 떠오르질 않아,
자바에서 직접 접근이 가능하도록 삽질을 했다.&lt;/p&gt;

&lt;p&gt;꽤 오랜 삽질끝에 구현은 되었는데 좋은 방법인지는 또 다른 시행착오를 겪어봐야할 것 같다.&lt;/p&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="mybatis" /><category term="SQL" /><summary type="html">레거시 환경에 DBCP2 적용하기 (not used Spring Framework)</summary></entry><entry><title type="html">[Google App Engine] Connect Google Cloud SQL</title><link href="http://localhost:4000/gcp/gcp_sql/" rel="alternate" type="text/html" title="[Google App Engine] Connect Google Cloud SQL" /><published>2018-11-22T00:00:00+09:00</published><updated>2018-11-22T00:00:00+09:00</updated><id>http://localhost:4000/gcp/gcp_sql</id><content type="html" xml:base="http://localhost:4000/gcp/gcp_sql/">&lt;p&gt;GCP SQL instance를 생성하고 MySQL Workbench에서 접속을 하려고 하는데 계속해서 timeout 에러를 뱉어내며 접속을 할 수 없었다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://cloud.google.com/sql/docs/mysql/admin-tools&quot; alt=&quot;GCP에서 제공하는 MySQL도구 연결&quot; /&gt;
구글 가이드문서를 보고 해봤지만 별다른 설정없이 접속이 붙어야 될 것 같은데 도저히 접속이 안돼서 꽤 많은 시간을 뻘짓했다.&lt;/p&gt;

&lt;p&gt;너무 기본적인것이라 나만 몰랐나보다.&lt;/p&gt;

&lt;p&gt;아주 간단한 설정으로 접속이 가능하다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_gcp_sql.png&quot; alt=&quot;sql&quot; /&gt;&lt;/p&gt;

&lt;p&gt;GCP SQL인스턴스 정보 메인화면의 상단 탭 중에 &lt;strong&gt;[연결]&lt;/strong&gt;이라는 탭이 있다.&lt;/p&gt;

&lt;p&gt;네트워크 설정관련한 세팅이 가능한 곳인데
해당 메뉴로 이동하여 다음의 설정만 추가해주면 끝난다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_gcp_sql_network.png&quot; alt=&quot;network&quot; /&gt;&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;공개IP를 체크 후 &lt;code&gt;+네트워크 추가&lt;/code&gt;를 선택&lt;/li&gt;
  &lt;li&gt;자유롭게 [이름]을 기입하고 [네트워크]란에 &lt;strong&gt;0.0.0.0/0&lt;/strong&gt; 을 입력&lt;/li&gt;
  &lt;li&gt;[저장]&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;잠시 인스턴스 업데이트가 진행된다.&lt;/p&gt;

&lt;p&gt;다시 workbench로 이동하여 접속 테스트를 진행하면 손쉽게 접속할 수 있다.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_gcp_sql_connect.png&quot; alt=&quot;workbench&quot; /&gt;&lt;/p&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="GCP" /><category term="SQL" /><summary type="html">GCP SQL instance를 생성하고 MySQL Workbench에서 접속을 하려고 하는데 계속해서 timeout 에러를 뱉어내며 접속을 할 수 없었다.</summary></entry><entry><title type="html">Open Source 활용기</title><link href="http://localhost:4000/java/OpenSource/" rel="alternate" type="text/html" title="Open Source 활용기" /><published>2018-11-22T00:00:00+09:00</published><updated>2018-11-22T00:00:00+09:00</updated><id>http://localhost:4000/java/OpenSource</id><content type="html" xml:base="http://localhost:4000/java/OpenSource/">&lt;h2 id=&quot;오픈소스깃헙-사용하기&quot;&gt;오픈소스/깃헙 사용하기&lt;/h2&gt;

&lt;p&gt;https://medium.com/hbsmith/%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4-%EC%9D%BC%EA%B8%B0-git-%EA%B7%B8%EB%A6%AC%EA%B3%A0-%EC%A0%80%EC%9E%A5%EC%86%8C-%EB%8B%A4%EB%A3%A8%EA%B8%B0-9f66c98c1cb5&lt;/p&gt;

&lt;p&gt;https://json.postype.com/post/210431&lt;/p&gt;

&lt;p&gt;https://www.popit.kr/%EC%98%A4%ED%94%88%EC%86%8C%EC%8A%A4-git-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-pull-request-%EB%B3%B4%EB%82%B4%EA%B8%B0/&lt;/p&gt;

&lt;p&gt;http://sanghaklee.tistory.com/30&lt;/p&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="Open Source" /><category term="github" /><summary type="html">오픈소스/깃헙 사용하기</summary></entry><entry><title type="html">[Google App Engine] include HTML in JSP</title><link href="http://localhost:4000/gcp/gae_resources/" rel="alternate" type="text/html" title="[Google App Engine] include HTML in JSP" /><published>2018-11-21T00:00:00+09:00</published><updated>2018-11-21T00:00:00+09:00</updated><id>http://localhost:4000/gcp/gae_resources</id><content type="html" xml:base="http://localhost:4000/gcp/gae_resources/">&lt;p&gt;황당한 일을 겪었다.&lt;/p&gt;

&lt;p&gt;진행 중인 웹서비스에서 Google App Engine(이하 GAE)에 배포 후 팝업화면 전체가 노출되지 않는 것이다.&lt;/p&gt;

&lt;p&gt;로컬에서 테스트시에는 문제가 없던 것들이, GAE 배포만 하면 모든 팝업창이 나타나지 않았다.&lt;/p&gt;

&lt;p&gt;어떤 에러로그도 발생하지 않고 아무런 반응이 없다.
네트워크를 보면, 아무리 팝업창을 클릭해도 API가 호출되지 않는다.&lt;/p&gt;

&lt;p&gt;API통신 자체가 되지 않는 다는 것은 팝업창에 문제가 있으리라.&lt;/p&gt;

&lt;p&gt;꽤 오랜 삽질과 인고의 시간 결과, 현재 우리 프로젝트의 Front-end부분의 팝업창 구현은 모두 각각의 HTML을 include시켜 이벤트가 발생하도록 구현되어 있다.&lt;/p&gt;

&lt;p&gt;예를들어 ‘히스토리’ 라는 메뉴가 있다면, history/index.jsp 라는 각각의 메인 서비스에 대한 jsp 기본 화면을 그려놓고.&lt;/p&gt;

&lt;p&gt;그 안에&lt;/p&gt;

&lt;div class=&quot;language-html highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;jsp:include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;page=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;modal-item-detail.html&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;flush=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;true&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/jsp:include&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이와 같은 방식으로 각각의 HTML로 구현해놓은 HTML파일들을 &lt;code&gt; jsp:include &lt;/code&gt;를 통해서 삽입했다.&lt;/p&gt;

&lt;p&gt;문제는 우리 프로젝트르를 패키징한 후 이렇게 include한 부분이 모두 제거되어 있었던 것이다!!&lt;/p&gt;

&lt;h3 id=&quot;정상적으로-include된-소스&quot;&gt;정상적으로 include된 소스&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_included_modal.png&quot; alt=&quot;include_html&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;include되지-않은-소스&quot;&gt;include되지 않은 소스&lt;/h3&gt;
&lt;p&gt;&lt;img src=&quot;/assets/images/study/dev/2018/11_not_included_modal.png&quot; alt=&quot;not_include_html&quot; /&gt;&lt;/p&gt;

&lt;p&gt;이처럼 include 자체에 문제가 있는 것으로 보였다.&lt;/p&gt;

&lt;p&gt;&lt;a href=&quot;http://yongblog.tistory.com/entry/jspinclude-%EC%99%80-include-%EC%B0%A8%EC%9D%B4&quot;&gt;jsp:include와 &amp;lt;%@ include%&amp;gt; 의 차이&amp;gt;&lt;/a&gt;&lt;/p&gt;

&lt;p&gt;위 링크를 보면, ‘jsp:include 특징 중 서블릿 컨테이너에 따라 HTML 페이지는 include가 안될 수 있다.’ 고 한다. 사실 기존에 되던 방식이기 때문에(서블릿 컨테이너가 바뀐것이 없기 때문에) 이걸로 될까 싶어 &lt;code&gt;&amp;lt;%@ include &amp;gt;&lt;/code&gt; 방식으로 진행해봤지만 결과는 똑같았다.&lt;/p&gt;

&lt;p&gt;…&lt;/p&gt;

&lt;p&gt;그러다 문득 servlet 이라는 힌트까 떠올랐다.&lt;/p&gt;

&lt;p&gt;app engine에 올릴때 설정을하는 &lt;code&gt;appengine-web-app&lt;/code&gt; 의 구성이 의심되었다.&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;cp&quot;&gt;&amp;lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;appengine-web-app&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;xmlns=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;http://appengine.google.com/ns/1.0&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;version&amp;gt;&lt;/span&gt;v1-snapshot&lt;span class=&quot;nt&quot;&gt;&amp;lt;/version&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;runtime&amp;gt;&lt;/span&gt;java8&lt;span class=&quot;nt&quot;&gt;&amp;lt;/runtime&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;threadsafe&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/threadsafe&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;use-google-connector-j&amp;gt;&lt;/span&gt;true&lt;span class=&quot;nt&quot;&gt;&amp;lt;/use-google-connector-j&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;warmup-requests-enabled&amp;gt;&lt;/span&gt;false&lt;span class=&quot;nt&quot;&gt;&amp;lt;/warmup-requests-enabled&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;env-variables&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;env-var&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;DEFAULT_ENCODING&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;UTF-8&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/env-variables&amp;gt;&lt;/span&gt;

    
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;resource-files&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.xml&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/resource-files&amp;gt;&lt;/span&gt;
    

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;system-properties&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;property&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;name=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;cloudsql&quot;&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;value=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;${mysql_url}&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/system-properties&amp;gt;&lt;/span&gt;

    &lt;span class=&quot;nt&quot;&gt;&amp;lt;static-files&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.html&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/include&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.json&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/include&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.js&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;&amp;gt;&amp;lt;/include&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.css&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.scss&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.png&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.jpg&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.ico&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.gif&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.woff&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.woff2&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.svg&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.eot&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
        &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.ttf&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;/static-files&amp;gt;&lt;/span&gt;

   ...
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/appengine-web-app&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;대략적으로 이와 같이 구현되어있었는데…&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;resource-files&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.xml&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/resource-files&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;이 부분은 내가 myBatis를 도입하면서 resources/ 하위에 mapper를 사용하기 위해 설정해놓은 것이다.&lt;/p&gt;

&lt;p&gt;사실 jsp/html 쪽에 관련된 작업을 한 것이 아무것도 없는데, 그쪽에서 문제가 난다는 것은 배포 설정에 문제가 있다는 것밖에 안된다.&lt;/p&gt;

&lt;p&gt;지워봤다.&lt;/p&gt;

&lt;p&gt;그리고 다시 &lt;code&gt;mvn clean package&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;일단 메이븐 패키징은 문제없이 된다.&lt;/p&gt;

&lt;p&gt;혹시 myBatis가 mapper를 찾지 못할까 걱정되었다. 하지만 전혀 문제없이 쿼릴르 날리고 있다.&lt;/p&gt;

&lt;p&gt;허무했지만 침착하게 dev deploy를 진행했다.&lt;/p&gt;

&lt;p&gt;&lt;code&gt;-Pdev clean appengine:deploy&lt;/code&gt;&lt;/p&gt;

&lt;p&gt;역시 정상적으로 실행되었고. 팝업창도 정상적으로 출력된다.&lt;/p&gt;

&lt;p&gt;당연히 html도 문제없이 include되었다..&lt;/p&gt;

&lt;div class=&quot;language-xml highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;&lt;span class=&quot;nt&quot;&gt;&amp;lt;resource-files&amp;gt;&lt;/span&gt;
    &lt;span class=&quot;nt&quot;&gt;&amp;lt;include&lt;/span&gt; &lt;span class=&quot;na&quot;&gt;path=&lt;/span&gt;&lt;span class=&quot;s&quot;&gt;&quot;/**.xml&quot;&lt;/span&gt;&lt;span class=&quot;nt&quot;&gt;/&amp;gt;&lt;/span&gt;
&lt;span class=&quot;nt&quot;&gt;&amp;lt;/resource-files&amp;gt;&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;p&gt;resource파일 중 xml만 사용하고 나머지는 제외시키는 것일까?&lt;/p&gt;

&lt;p&gt;이 설정이 jsp:include 자체를 막아버린 것일까?&lt;/p&gt;

&lt;p&gt;문제는 해결했지만, 근본적인 원인은 파악되지 않아 여전히 찜찜한 상황이다.&lt;/p&gt;

&lt;p&gt;우선 기록해두고, 계속 트래킹해보리라.&lt;/p&gt;</content><author><name>@betterFLY</name><email>betterfly4202@gmail.com</email></author><category term="Google Cloud Platform" /><category term="Google App Engine" /><category term="JSP" /><summary type="html">황당한 일을 겪었다.</summary></entry></feed>