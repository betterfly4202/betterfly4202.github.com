<h2 id="maven과-빌드이야기">Maven과 빌드이야기</h2>

<p>현재 작업하는 프로그램은 최종적으로 jar파일로 배포하여 실행해야한다.</p>

<p>항상 웹개발을 했기때문에 jar를 패키징하는 것도 처음이었고, 프레임워크의 도움없이 레거시시스템으로 개발하는것도 처음이었다.</p>

<p>그리고 사실 그동안 메이븐은 그저 라이브러리를 디펜던시해주는 역할로만 사용했을 뿐 그 이상의 많은 환경을 손대지 않았었다.</p>

<p>그러다보니 스터디하는 대부분의 내용들은 단순히 코딩을 잘할 수 있는 것에 집중되었고 외부의 환경이나 흐름에 대한 고찰은 하지 못했었다.</p>

<p>무식하면 용감하다고, 이런 모든것들이 결국 프로그래밍이라는 것. 그리고 궁극적으로 이 모든 과정들이 어떻게 빌드되어 구동되는지에 대해서 깊이 알아보지도 않았다.</p>

<p>그러던 중 이렇게 스프링을 제외시키고 순수 메이븐 빌드환경을 구성해서 작업하며 정말 새롭게 깨닫고 배운 부분들이 많아 하나씩 기록해두려한다.</p>

<hr />

<p>일반적으로 웹 개발에서 메이븐 사용시 빌드환경에 필요한 모듈을 얹어주면 패키징할때마다 필요한 모듈을 가져와서 라이브러리에 jar파일을 준비해준다.</p>

<p>하지만 데몬에서는 어떨까? 웹에서 모듈을 준비하지 못한다면?</p>

<p>때문에 데몬에서 실행되는 jar파일을 생성시 필요한 메이블 설정이 있다.</p>

<p><img src="/assets/images/notes/2018/10/dependency_jar.png" alt="jar" /></p>

<p>이와 같은 설정인데,</p>

<p>결과적으로 maven-plugins에 해당 옵션을 삽입해준다.</p>

<p><img src="/assets/images/notes/2018/10/config.png" alt="config" /></p>

<p>이처럼 설정 후 패키징을 해주자</p>

<blockquote>
  <p>clean package</p>
</blockquote>

<p>/target 디렉토리에 패키징된 jar파일이 생성된다.</p>

<p>위 설정이 정상적으로 적용되었다면, 기본 <strong>artifact-id.jar</strong> 파일과 더불어,</p>

<p><strong>[artifact-id]-[descriptorRef].jar</strong> 이와 같은 형식으 파일이 떨어진다.</p>

<p>이 파일은 메이븐에 주입해놓은 모든 모듈을 포함한 jar 파일이기 때문에 데몬에서 실행시 해당 jar파일을 실행하면된다.</p>

<p>[참고]</p>
<ul>
  <li>http://javafactory.tistory.com/1490</li>
  <li>https://www.lesstif.com/display/JAVA/Maven+Dependency+Plugin</li>
</ul>
